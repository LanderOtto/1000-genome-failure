#!/usr/bin/env streamflow
version: v1.0
workflows:
  master:
    type: cwl
    config:
      file: main.cwl
      settings: config.yml
    bindings:
      - step: /
        target:
          - deployment: image1
          - deployment: image2
          - deployment: image3
          - deployment: image4

deployments:
  image1:
    type: docker
    lazy: false
    config:
      image: mul8/dummyfailure
      cpus: 2

  image2:
    type: docker
    lazy: false
    config:
      image: mul8/dummyfailure
      cpus: 2

  image3:
    type: docker
    lazy: false
    config:
      image: mul8/dummyfailure
      cpus: 2
  
  image4:
    type: docker
    lazy: false
    config:
      image: mul8/dummyfailure
      cpus: 2

failureManager:
  enabled: True
  type: default
  config:
    max_retries: 10000
    retry_delay: 5

scheduling:
  scheduler:
    type: default
    config:
      retry_delay: 10

bindingFilters:
  random:
    type: shuffle
    config: { }

database:
  type: default
  config:
    connection: /home/alberto/Work/Workflows/1000Genome/streamflow-wf/.streamflow/sqlite.db